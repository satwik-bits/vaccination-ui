{"ast":null,"code":"var _jsxFileName = \"/Users/satwikmohanty/IdeaProjects/vaccination-ui/src/components/EditDrive.js\";\n// src/components/EditDrive.js\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport axios from '../api/axios';\nexport default function EditDrive({\n  token\n}) {\n  const {\n    identifier\n  } = useParams();\n  const navigate = useNavigate();\n  const [form, setForm] = useState({\n    title: '',\n    scheduledDate: '',\n    location: '',\n    availableDozes: '',\n    applicableClasses: ''\n  });\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  // 1) On mount, fetch the overview and pull out our drive\n  useEffect(() => {\n    async function load() {\n      try {\n        const res = await axios.post('/dashboard/overview', {}, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        const drive = res.data.vaccinationDriveList.find(d => d.driveIdentifier === identifier);\n        if (!drive) {\n          setError('Drive not found');\n        } else {\n          setForm({\n            title: drive.title,\n            scheduledDate: drive.scheduledDate.slice(0, 16),\n            // yyyy-MM-ddTHH:mm\n            location: drive.location,\n            availableDozes: drive.availableDozes,\n            applicableClasses: drive.applicableClasses.join(', ')\n          });\n        }\n      } catch {\n        setError('Failed to load drive');\n      } finally {\n        setLoading(false);\n      }\n    }\n    load();\n  }, [identifier, token]);\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setForm(f => ({\n      ...f,\n      [name]: value\n    }));\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError('');\n    try {\n      await axios.put(`/v1/vaccine-drive/update/${identifier}`, {\n        title: form.title,\n        scheduledDate: form.scheduledDate,\n        location: form.location,\n        availableDozes: parseInt(form.availableDozes, 10),\n        applicableClasses: form.applicableClasses.split(',').map(n => parseInt(n.trim(), 10))\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      navigate('/dashboard', {\n        replace: true\n      });\n    } catch {\n      setError('Update failed');\n    }\n  };\n  if (loading) return /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 23\n    }\n  }, \"Loading\\u2026\");\n  if (error) return /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 23\n    }\n  }, error);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      maxWidth: 600,\n      margin: '2rem auto',\n      padding: 20,\n      border: '1px solid #ccc',\n      borderRadius: 8\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }, \"Edit Vaccination Drive\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, [['Title', 'title', 'text'], ['Scheduled Date', 'scheduledDate', 'datetime-local'], ['Location', 'location', 'text'], ['Available Doses', 'availableDozes', 'number'], ['Applicable Classes (comma-separated)', 'applicableClasses', 'text']].map(([label, name, type]) => /*#__PURE__*/React.createElement(\"div\", {\n    key: name,\n    style: {\n      marginBottom: 16\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    style: {\n      display: 'block',\n      marginBottom: 4\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }, label), /*#__PURE__*/React.createElement(\"input\", {\n    name: name,\n    type: type,\n    value: form[name],\n    onChange: handleChange,\n    required: true,\n    style: {\n      width: '100%',\n      padding: 8,\n      borderRadius: 4,\n      border: '1px solid #ccc'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    style: {\n      padding: '0.75rem 1.5rem',\n      background: '#007bff',\n      color: '#fff',\n      border: 'none',\n      borderRadius: 4,\n      cursor: 'pointer'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }, \"Update Drive\")));\n}","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","axios","EditDrive","token","identifier","navigate","form","setForm","title","scheduledDate","location","availableDozes","applicableClasses","loading","setLoading","error","setError","load","res","post","headers","Authorization","drive","data","vaccinationDriveList","find","d","driveIdentifier","slice","join","handleChange","e","name","value","target","f","handleSubmit","preventDefault","put","parseInt","split","map","n","trim","replace","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","style","color","maxWidth","margin","padding","border","borderRadius","onSubmit","label","type","key","marginBottom","display","onChange","required","width","background","cursor"],"sources":["/Users/satwikmohanty/IdeaProjects/vaccination-ui/src/components/EditDrive.js"],"sourcesContent":["// src/components/EditDrive.js\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport axios from '../api/axios';\n\nexport default function EditDrive({ token }) {\n  const { identifier } = useParams();\n  const navigate = useNavigate();\n  const [form, setForm] = useState({\n    title: '',\n    scheduledDate: '',\n    location: '',\n    availableDozes: '',\n    applicableClasses: ''\n  });\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  // 1) On mount, fetch the overview and pull out our drive\n  useEffect(() => {\n    async function load() {\n      try {\n        const res = await axios.post(\n          '/dashboard/overview',\n          {},\n          { headers: { Authorization: `Bearer ${token}` } }\n        );\n        const drive = res.data.vaccinationDriveList\n          .find(d => d.driveIdentifier === identifier);\n        if (!drive) {\n          setError('Drive not found');\n        } else {\n          setForm({\n            title: drive.title,\n            scheduledDate: drive.scheduledDate.slice(0,16), // yyyy-MM-ddTHH:mm\n            location: drive.location,\n            availableDozes: drive.availableDozes,\n            applicableClasses: drive.applicableClasses.join(', ')\n          });\n        }\n      } catch {\n        setError('Failed to load drive');\n      } finally {\n        setLoading(false);\n      }\n    }\n    load();\n  }, [identifier, token]);\n\n  const handleChange = e => {\n    const { name, value } = e.target;\n    setForm(f => ({ ...f, [name]: value }));\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError('');\n    try {\n      await axios.put(\n        `/v1/vaccine-drive/update/${identifier}`,\n        {\n          title: form.title,\n          scheduledDate: form.scheduledDate,\n          location: form.location,\n          availableDozes: parseInt(form.availableDozes,10),\n          applicableClasses: form.applicableClasses.split(',').map(n=>parseInt(n.trim(),10))\n        },\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n      navigate('/dashboard', { replace: true });\n    } catch {\n      setError('Update failed');\n    }\n  };\n\n  if (loading) return <p>Loadingâ€¦</p>;\n  if (error)   return <p style={{color:'red'}}>{error}</p>;\n\n  return (\n    <div style={{ maxWidth:600, margin:'2rem auto', padding:20, border:'1px solid #ccc', borderRadius:8 }}>\n      <h2>Edit Vaccination Drive</h2>\n      <form onSubmit={handleSubmit}>\n        {[\n          ['Title','title','text'],\n          ['Scheduled Date','scheduledDate','datetime-local'],\n          ['Location','location','text'],\n          ['Available Doses','availableDozes','number'],\n          ['Applicable Classes (comma-separated)','applicableClasses','text']\n        ].map(([label,name,type])=>(\n          <div key={name} style={{ marginBottom:16 }}>\n            <label style={{ display:'block', marginBottom:4 }}>{label}</label>\n            <input\n              name={name}\n              type={type}\n              value={form[name]}\n              onChange={handleChange}\n              required\n              style={{ width:'100%', padding:8, borderRadius:4, border:'1px solid #ccc' }}\n            />\n          </div>\n        ))}\n        <button\n          type=\"submit\"\n          style={{ padding:'0.75rem 1.5rem', background:'#007bff', color:'#fff', border:'none', borderRadius:4, cursor:'pointer' }}\n        >\n          Update Drive\n        </button>\n      </form>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}